{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"electron\"","webpack:///external \"path\"","webpack:///./src/background.js","webpack:///external \"fs-jetpack\"","webpack:///external \"url\"","webpack:///external \"child_process\""],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","__webpack_exports__","path__WEBPACK_IMPORTED_MODULE_1__","path__WEBPACK_IMPORTED_MODULE_1___default","app","BrowserWindow","port","child","MACOS","killStr","appPath","path","join","__dirname","execPath","process","platform","replace","console","log","Error","macAbsolutePath","env_path","env","PATH","env_libs_site","R_LIBS_SITE","NODE_R_HOME","childProcess","spawn","mainWindow","createWindow","loading","show","frame","Date","toISOString","loadURL","once","webPreferences","nodeIntegration","width","height","title","webContents","setTimeout","reload","hide","close","on","cleanUpApplication","quit","kill","execSync","stdout","data","stderr"],"mappings":"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","file":"background.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","module.exports = require(\"electron\");","module.exports = require(\"path\");","// Modules to control application life and create native browser window\r\nconst {app, BrowserWindow} = require('electron')\r\nimport jetpack from \"fs-jetpack\";\r\n\r\n\r\nimport path from \"path\";\r\nconst url = require('url')\r\nconst port = \"9191\"\r\nconst child = require('child_process');\r\nconst MACOS = \"darwin\"\r\nconst WINDOWS = \"win32\"\r\n\r\nvar killStr = \"\"\r\nvar appPath = path.join(__dirname, \"app.R\" )\r\nvar execPath = \"RScript\"\r\n\r\n\r\n\r\n\r\n\r\nif(process.platform == WINDOWS){\r\n  appPath = appPath.replace(/\\\\/g, \"\\\\\\\\\");\r\n  execPath = path.join(__dirname, \"R_win\", \"bin\", \"RScript.exe\" )\r\n} else if(process.platform == MACOS){\r\n  var macAbsolutePath = path.join(__dirname, \"R_mac\")\r\n  var env_path = macAbsolutePath+((process.env.PATH)?\":\"+process.env.PATH:\"\");\r\n  var env_libs_site = macAbsolutePath+\"/library\"+((process.env.R_LIBS_SITE)?\":\"+process.env.R_LIBS_SITE:\"\");\r\n  process.env.PATH = env_path\r\n  process.env.R_LIBS_SITE = env_libs_site\r\n  process.env.NODE_R_HOME = macAbsolutePath\r\n  \r\n  execPath = path.join(__dirname, \"R_mac\", \"bin\", \"R\" )\r\n} else {\r\n  console.log(\"not on windows or macos?\")\r\n  throw new Error(\"not on windows or macos?\")\r\n}\r\n\r\nconsole.log(process.env)\r\n\r\nconst childProcess = child.spawn(execPath, [\"-e\", \"shiny::runApp(file.path('\"+appPath+\"'), port=\"+port+\")\"])\r\nchildProcess.stdout.on('data', (data) => {\r\n  console.log(`stdout:${data}`)\r\n})\r\nchildProcess.stderr.on('data', (data) => {\r\n  console.log(`stderr:${data}`)\r\n})\r\n\r\n// Keep a global reference of the window object, if you don't, the window will\r\n// be closed automatically when the JavaScript object is garbage collected.\r\nlet mainWindow\r\n\r\nfunction createWindow () {\r\n  // Create the browser window.\r\n  //  mainWindow = new BrowserWindow({webPreferences:{nodeIntegration:false},width: 800, height: 600})\r\n  //  console.log(process.cwd())\r\n  console.log('create-window')\r\n\r\n\r\n    let loading = new BrowserWindow({show: false, frame: false})\r\n    //let loading = new BrowserWindow()\r\n    console.log(new Date().toISOString()+'::showing loading');\r\n    // Spin loader  (Chase TODO: This is leftover, go through it with base64enc::base64decode() then rawToChar())\r\n    loading.loadURL(\"data:text/html;charset=utf-8;base64,PGh0bWw+DQo8c3R5bGU+DQpib2R5ew0KICBwYWRkaW5nOiAxZW07DQogIGNvbG9yOiAjNzc3Ow0KICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogIGZvbnQtZmFtaWx5OiAiR2lsbCBzYW5zIiwgc2Fucy1zZXJpZjsNCiAgd2lkdGg6IDgwJTsNCiAgbWFyZ2luOiAwIGF1dG87DQp9DQpoMXsNCiAgbWFyZ2luOiAxZW0gMDsNCiAgYm9yZGVyLWJvdHRvbTogMXB4IGRhc2hlZDsNCiAgcGFkZGluZy1ib3R0b206IDFlbTsNCiAgZm9udC13ZWlnaHQ6IGxpZ2h0ZXI7DQp9DQpwew0KICBmb250LXN0eWxlOiBpdGFsaWM7DQp9DQoubG9hZGVyew0KICBtYXJnaW46IDAgMCAyZW07DQogIGhlaWdodDogMTAwcHg7DQogIHdpZHRoOiAyMCU7DQogIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgcGFkZGluZzogMWVtOw0KICBtYXJnaW46IDAgYXV0byAxZW07DQogIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCiAgdmVydGljYWwtYWxpZ246IHRvcDsNCn0NCg0KLyoNCiAgU2V0IHRoZSBjb2xvciBvZiB0aGUgaWNvbg0KKi8NCnN2ZyBwYXRoLA0Kc3ZnIHJlY3R7DQogIGZpbGw6ICNGRjY3MDA7DQp9DQo8L3N0eWxlPg0KPGJvZHk+PCEtLSAzICAtLT4NCjxkaXYgY2xhc3M9ImxvYWRlciBsb2FkZXItLXN0eWxlMyIgdGl0bGU9IjIiPg0KICA8c3ZnIHZlcnNpb249IjEuMSIgaWQ9ImxvYWRlci0xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCiAgICAgd2lkdGg9IjgwcHgiIGhlaWdodD0iODBweCIgdmlld0JveD0iMCAwIDUwIDUwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1MCA1MDsiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KICA8cGF0aCBmaWxsPSIjMDAwIiBkPSJNNDMuOTM1LDI1LjE0NWMwLTEwLjMxOC04LjM2NC0xOC42ODMtMTguNjgzLTE4LjY4M2MtMTAuMzE4LDAtMTguNjgzLDguMzY1LTE4LjY4MywxOC42ODNoNC4wNjhjMC04LjA3MSw2LjU0My0xNC42MTUsMTQuNjE1LTE0LjYxNWM4LjA3MiwwLDE0LjYxNSw2LjU0MywxNC42MTUsMTQuNjE1SDQzLjkzNXoiPg0KICAgIDxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZVR5cGU9InhtbCINCiAgICAgIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSINCiAgICAgIHR5cGU9InJvdGF0ZSINCiAgICAgIGZyb209IjAgMjUgMjUiDQogICAgICB0bz0iMzYwIDI1IDI1Ig0KICAgICAgZHVyPSIwLjZzIg0KICAgICAgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiLz4NCiAgICA8L3BhdGg+DQogIDwvc3ZnPg0KPC9kaXY+DQo8L2JvZHk+DQo8L2h0bWw+\");\r\n\r\n    loading.once('show', () => {\r\n      console.log(new Date().toISOString()+'::show loading')\r\n      mainWindow = new BrowserWindow({webPreferences:{nodeIntegration:false}, show:false, width: 800, height: 600, title:\"\"})\r\n\r\n      mainWindow.webContents.once('dom-ready', () => {\r\n        console.log(new Date().toISOString()+'::mainWindow loaded')\r\n        setTimeout( () => {\r\n          mainWindow.show()\r\n          if(process.platform == MACOS){\r\n            mainWindow.reload()\r\n          }\r\n          loading.hide()\r\n          loading.close()\r\n\r\n        }, 2000)\r\n\r\n      })\r\n      console.log(port)\r\n      // long loading html\r\n      mainWindow.loadURL('http://127.0.0.1:'+port)\r\n      \r\n      mainWindow.webContents.on('did-finish-load', function() {\r\n        console.log(new Date().toISOString()+'::did-finish-load')\r\n      });\r\n\r\n      mainWindow.webContents.on('did-start-load', function() {\r\n        console.log(new Date().toISOString()+'::did-start-load')\r\n      });\r\n\r\n      mainWindow.webContents.on('did-stop-load', function() {\r\n        console.log(new Date().toISOString()+'::did-stop-load')\r\n      });\r\n      mainWindow.webContents.on('dom-ready', function() {\r\n        console.log(new Date().toISOString()+'::dom-ready')\r\n      });\r\n\r\n      // Emitted when the window is closed.\r\n      mainWindow.on('closed', function () {\r\n        console.log(new Date().toISOString()+'::mainWindow.closed()')\r\n        cleanUpApplication()\r\n      })\r\n    })\r\n\r\n    loading.show()\r\n\r\n}\r\n\r\n\r\nfunction cleanUpApplication(){\r\n\r\n  app.quit()\r\n  \r\n  if(childProcess){\r\n    childProcess.kill();\r\n    if(killStr != \"\")\r\n      child.execSync(killStr)      \r\n  }\r\n}\r\n// This method will be called when Electron has finished\r\n// initialization and is ready to create browser windows.\r\n// Some APIs can only be used after this event occurs.\r\napp.on('ready', createWindow)\r\n\r\n// Quit when all windows are closed.\r\napp.on('window-all-closed', function () {\r\n  console.log('EVENT::window-all-closed')\r\n  // On OS X it is common for applications and their menu bar\r\n  // to stay active until the user quits explicitly with Cmd + Q\r\n  cleanUpApplication()\r\n\r\n})\r\n\r\napp.on('activate', function () {\r\n  // On OS X it's common to re-create a window in the app when the\r\n  // dock icon is clicked and there are no other windows open.\r\n  if (mainWindow === null) {\r\n    createWindow()\r\n  }\r\n})\r\n\r\n// In this file you can include the rest of your app's specific main process\r\n// code. You can also put them in separate files and require them here.\r\n","module.exports = require(\"fs-jetpack\");","module.exports = require(\"url\");","module.exports = require(\"child_process\");"],"sourceRoot":""}