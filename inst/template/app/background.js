!function(o){var n={};function e(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return o[t].call(i.exports,i,i.exports,e),i.l=!0,i.exports}e.m=o,e.c=n,e.d=function(o,n,t){e.o(o,n)||Object.defineProperty(o,n,{enumerable:!0,get:t})},e.r=function(o){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},e.t=function(o,n){if(1&n&&(o=e(o)),8&n)return o;if(4&n&&"object"==typeof o&&o&&o.__esModule)return o;var t=Object.create(null);if(e.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:o}),2&n&&"string"!=typeof o)for(var i in o)e.d(t,i,function(n){return o[n]}.bind(null,i));return t},e.n=function(o){var n=o&&o.__esModule?function(){return o.default}:function(){return o};return e.d(n,"a",n),n},e.o=function(o,n){return Object.prototype.hasOwnProperty.call(o,n)},e.p="",e(e.s=2)}([function(o,n){o.exports=require("electron")},function(o,n){o.exports=require("path")},function(o,n,e){"use strict";e.r(n);e(3);var t=e(1),i=e.n(t);const{app:r,BrowserWindow:l}=e(0),c=(e(4),"9191"),s=e(5),a="darwin";var d="",I=i.a.join(__dirname,"app.R"),g="RScript";if("win32"==process.platform)I=I.replace(/\\/g,"\\\\"),g=i.a.join(__dirname,"R_win","bin","RScript.exe");else{if(process.platform!=a)throw console.log("not on windows or macos?"),new Error("not on windows or macos?");var w=i.a.join(__dirname,"R_mac"),u=w+(process.env.PATH?":"+process.env.PATH:""),p=w+"/library"+(process.env.R_LIBS_SITE?":"+process.env.R_LIBS_SITE:"");process.env.PATH=u,process.env.R_LIBS_SITE=p,process.env.NODE_R_HOME=w,g=i.a.join(__dirname,"R_mac","bin","R")}console.log(process.env);const C=s.spawn(g,["-e","shiny::runApp(file.path('"+I+"'), port="+c+")"]);let b;function D(){console.log("create-window");let o=new l({show:!1,frame:!1});console.log((new Date).toISOString()+"::showing loading"),o.loadURL("data:text/html;charset=utf-8;base64,PGh0bWw+DQo8c3R5bGU+DQpib2R5ew0KICBwYWRkaW5nOiAxZW07DQogIGNvbG9yOiAjNzc3Ow0KICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogIGZvbnQtZmFtaWx5OiAiR2lsbCBzYW5zIiwgc2Fucy1zZXJpZjsNCiAgd2lkdGg6IDgwJTsNCiAgbWFyZ2luOiAwIGF1dG87DQp9DQpoMXsNCiAgbWFyZ2luOiAxZW0gMDsNCiAgYm9yZGVyLWJvdHRvbTogMXB4IGRhc2hlZDsNCiAgcGFkZGluZy1ib3R0b206IDFlbTsNCiAgZm9udC13ZWlnaHQ6IGxpZ2h0ZXI7DQp9DQpwew0KICBmb250LXN0eWxlOiBpdGFsaWM7DQp9DQoubG9hZGVyew0KICBtYXJnaW46IDAgMCAyZW07DQogIGhlaWdodDogMTAwcHg7DQogIHdpZHRoOiAyMCU7DQogIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgcGFkZGluZzogMWVtOw0KICBtYXJnaW46IDAgYXV0byAxZW07DQogIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCiAgdmVydGljYWwtYWxpZ246IHRvcDsNCn0NCg0KLyoNCiAgU2V0IHRoZSBjb2xvciBvZiB0aGUgaWNvbg0KKi8NCnN2ZyBwYXRoLA0Kc3ZnIHJlY3R7DQogIGZpbGw6ICNGRjY3MDA7DQp9DQo8L3N0eWxlPg0KPGJvZHk+PCEtLSAzICAtLT4NCjxkaXYgY2xhc3M9ImxvYWRlciBsb2FkZXItLXN0eWxlMyIgdGl0bGU9IjIiPg0KICA8c3ZnIHZlcnNpb249IjEuMSIgaWQ9ImxvYWRlci0xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCiAgICAgd2lkdGg9IjgwcHgiIGhlaWdodD0iODBweCIgdmlld0JveD0iMCAwIDUwIDUwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1MCA1MDsiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KICA8cGF0aCBmaWxsPSIjMDAwIiBkPSJNNDMuOTM1LDI1LjE0NWMwLTEwLjMxOC04LjM2NC0xOC42ODMtMTguNjgzLTE4LjY4M2MtMTAuMzE4LDAtMTguNjgzLDguMzY1LTE4LjY4MywxOC42ODNoNC4wNjhjMC04LjA3MSw2LjU0My0xNC42MTUsMTQuNjE1LTE0LjYxNWM4LjA3MiwwLDE0LjYxNSw2LjU0MywxNC42MTUsMTQuNjE1SDQzLjkzNXoiPg0KICAgIDxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZVR5cGU9InhtbCINCiAgICAgIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSINCiAgICAgIHR5cGU9InJvdGF0ZSINCiAgICAgIGZyb209IjAgMjUgMjUiDQogICAgICB0bz0iMzYwIDI1IDI1Ig0KICAgICAgZHVyPSIwLjZzIg0KICAgICAgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiLz4NCiAgICA8L3BhdGg+DQogIDwvc3ZnPg0KPC9kaXY+DQo8L2JvZHk+DQo8L2h0bWw+"),o.once("show",()=>{console.log((new Date).toISOString()+"::show loading"),(b=new l({webPreferences:{nodeIntegration:!1},show:!1,width:800,height:600,title:""})).webContents.once("dom-ready",()=>{console.log((new Date).toISOString()+"::mainWindow loaded"),setTimeout(()=>{b.show(),process.platform==a&&b.reload(),o.hide(),o.close()},2e3)}),console.log(c),b.loadURL("http://127.0.0.1:"+c),b.webContents.on("did-finish-load",function(){console.log((new Date).toISOString()+"::did-finish-load")}),b.webContents.on("did-start-load",function(){console.log((new Date).toISOString()+"::did-start-load")}),b.webContents.on("did-stop-load",function(){console.log((new Date).toISOString()+"::did-stop-load")}),b.webContents.on("dom-ready",function(){console.log((new Date).toISOString()+"::dom-ready")}),b.on("closed",function(){console.log((new Date).toISOString()+"::mainWindow.closed()"),A()})}),o.show()}function A(){r.quit(),C&&(C.kill(),""!=d&&s.execSync(d))}C.stdout.on("data",o=>{console.log(`stdout:${o}`)}),C.stderr.on("data",o=>{console.log(`stderr:${o}`)}),r.on("ready",D),r.on("window-all-closed",function(){console.log("EVENT::window-all-closed"),A()}),r.on("activate",function(){null===b&&D()})},function(o,n){o.exports=require("fs-jetpack")},function(o,n){o.exports=require("url")},function(o,n){o.exports=require("child_process")}]);
//# sourceMappingURL=background.js.map